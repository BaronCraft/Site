<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>3D –°–æ–ª–Ω–µ—á–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/controls/OrbitControls.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Arial', sans-serif;
            background: #000;
            color: white;
            overflow: hidden;
            height: 100vh;
        }

        #container {
            position: absolute;
            width: 100%;
            height: 100%;
            top: 0;
            left: 0;
        }

        #ui {
            position: absolute;
            top: 20px;
            left: 20px;
            z-index: 100;
            background: rgba(0, 0, 0, 0.8);
            padding: 20px;
            border-radius: 10px;
            width: 300px;
            border: 1px solid rgba(255, 215, 0, 0.3);
        }

        h1 {
            color: #ffd700;
            margin-bottom: 15px;
            font-size: 24px;
            text-align: center;
        }

        .planet-info {
            margin-bottom: 15px;
            padding: 15px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 8px;
            border-left: 4px solid #ffd700;
        }

        #planetName {
            font-size: 22px;
            font-weight: bold;
            color: #ffd700;
            margin-bottom: 8px;
        }

        #planetDescription {
            font-size: 14px;
            color: #aaa;
            margin-bottom: 5px;
        }

        .controls {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
            margin-top: 15px;
        }

        button {
            background: rgba(30, 111, 204, 0.7);
            color: white;
            border: none;
            padding: 10px;
            border-radius: 5px;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 14px;
        }

        button:hover {
            background: rgba(30, 111, 204, 1);
            transform: translateY(-2px);
        }

        button.active {
            background: #ffd700;
            color: #000;
        }

        .instructions {
            position: absolute;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(0, 0, 0, 0.8);
            padding: 15px;
            border-radius: 10px;
            text-align: center;
            border: 1px solid rgba(255, 215, 0, 0.3);
            font-size: 14px;
        }

        .instructions p {
            margin: 5px 0;
            color: #ddd;
        }
    </style>
</head>
<body>
    <div id="container"></div>
    
    <div id="ui">
        <h1>üåå –°–æ–ª–Ω–µ—á–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞</h1>
        <div class="planet-info">
            <div id="planetName">–°–æ–ª–Ω—Ü–µ</div>
            <div id="planetDescription">–¶–µ–Ω—Ç—Ä–∞–ª—å–Ω–∞—è –∑–≤–µ–∑–¥–∞ —Å–∏—Å—Ç–µ–º—ã</div>
            <div>–î–∏–∞–º–µ—Ç—Ä: 1.4 –º–ª–Ω –∫–º</div>
            <div>–¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞: 5500¬∞C</div>
        </div>
        
        <div class="controls">
            <button id="toggleOrbits" class="active" onclick="toggleOrbits()">–û—Ä–±–∏—Ç—ã</button>
            <button id="toggleRotation" class="active" onclick="toggleRotation()">–í—Ä–∞—â–µ–Ω–∏–µ</button>
            <button id="resetView" onclick="resetView()">–°–±—Ä–æ—Å</button>
            <button onclick="focusSun()">–ö –°–æ–ª–Ω—Ü—É</button>
        </div>
        
        <div style="margin-top: 15px;">
            <div>–°–∫–æ—Ä–æ—Å—Ç—å: <span id="speedValue">3x</span></div>
            <input type="range" id="speedControl" min="0" max="10" value="3" step="0.5" 
                   style="width: 100%; margin-top: 5px;">
        </div>
    </div>

    <div class="instructions">
        <p>üñ±Ô∏è –õ–ö–ú + –¥–≤–∏–∂–µ–Ω–∏–µ = –≤—Ä–∞—â–µ–Ω–∏–µ ‚Ä¢ üîç –ö–æ–ª–µ—Å–æ –º—ã—à–∏ = –ø—Ä–∏–±–ª–∏–∂–µ–Ω–∏–µ</p>
        <p>ü™ê –ö–ª–∏–∫–Ω–∏—Ç–µ –ø–æ –ø–ª–∞–Ω–µ—Ç–µ –¥–ª—è —Ñ–æ–∫—É—Å–∞ ‚Ä¢ –ü–ö–ú + –¥–≤–∏–∂–µ–Ω–∏–µ = –ø–∞–Ω–æ—Ä–∞–º–∏—Ä–æ–≤–∞–Ω–∏–µ</p>
    </div>

    <script>
        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
        const scene = new THREE.Scene();
        scene.fog = new THREE.Fog(0x000010, 400, 800);
        
        const camera = new THREE.PerspectiveCamera(60, window.innerWidth / window.innerHeight, 0.1, 2000);
        camera.position.set(0, 40, 150);
        
        const renderer = new THREE.WebGLRenderer({ antialias: true });
        renderer.setSize(window.innerWidth, window.innerHeight);
        renderer.setPixelRatio(window.devicePixelRatio);
        document.getElementById('container').appendChild(renderer.domElement);
        
        // –ö–æ–Ω—Ç—Ä–æ–ª—ã –∫–∞–º–µ—Ä—ã
        const controls = new THREE.OrbitControls(camera, renderer.domElement);
        controls.enableDamping = true;
        controls.dampingFactor = 0.05;
        controls.minDistance = 20;
        controls.maxDistance = 500;
        controls.maxPolarAngle = Math.PI * 0.9;
        
        // –û—Å–≤–µ—â–µ–Ω–∏–µ
        const ambientLight = new THREE.AmbientLight(0x333333);
        scene.add(ambientLight);
        
        const sunLight = new THREE.PointLight(0xffffff, 2, 1000);
        sunLight.position.set(0, 0, 0);
        scene.add(sunLight);
        
        // –ó–≤–µ–∑–¥—ã
        function createStars() {
            const starsGeometry = new THREE.BufferGeometry();
            const starsCount = 5000;
            const positions = new Float32Array(starsCount * 3);
            
            for (let i = 0; i < starsCount * 3; i += 3) {
                positions[i] = (Math.random() - 0.5) * 2000;
                positions[i + 1] = (Math.random() - 0.5) * 2000;
                positions[i + 2] = (Math.random() - 0.5) * 2000;
            }
            
            starsGeometry.setAttribute('position', new THREE.BufferAttribute(positions, 3));
            
            const starsMaterial = new THREE.PointsMaterial({
                color: 0xffffff,
                size: 0.7,
                transparent: true
            });
            
            const stars = new THREE.Points(starsGeometry, starsMaterial);
            scene.add(stars);
        }
        
        // –ü—Ä–∞–≤–∏–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –æ –ø–ª–∞–Ω–µ—Ç–∞—Ö
        const planetsData = [
            { 
                name: "–°–æ–ª–Ω—Ü–µ", 
                radius: 10, 
                color: 0xFDB813, 
                distance: 0, 
                speed: 0,
                diameter: "1.4 –º–ª–Ω –∫–º",
                temp: "5 500¬∞C",
                desc: "–¶–µ–Ω—Ç—Ä–∞–ª—å–Ω–∞—è –∑–≤–µ–∑–¥–∞ —Å–∏—Å—Ç–µ–º—ã"
            },
            { 
                name: "–ú–µ—Ä–∫—É—Ä–∏–π", 
                radius: 1.5, 
                color: 0x8C7853, 
                distance: 28, 
                speed: 4.1,
                diameter: "4 879 –∫–º",
                temp: "430¬∞C –¥–Ω–µ–º / -180¬∞C –Ω–æ—á—å—é",
                desc: "–°–∞–º–∞—è –±–ª–∏–∑–∫–∞—è –∫ –°–æ–ª–Ω—Ü—É"
            },
            { 
                name: "–í–µ–Ω–µ—Ä–∞", 
                radius: 3.8, 
                color: 0xFFC649, 
                distance: 44, 
                speed: 1.6,
                diameter: "12 104 –∫–º",
                temp: "465¬∞C",
                desc: "–°–∞–º–∞—è –≥–æ—Ä—è—á–∞—è –ø–ª–∞–Ω–µ—Ç–∞"
            },
            { 
                name: "–ó–µ–º–ª—è", 
                radius: 4, 
                color: 0x2E86C1, 
                distance: 62, 
                speed: 1,
                diameter: "12 742 –∫–º",
                temp: "15¬∞C —Å—Ä–µ–¥–Ω—è—è",
                desc: "–ù–∞—à –¥–æ–º"
            },
            { 
                name: "–ú–∞—Ä—Å", 
                radius: 2.1, 
                color: 0xC1440E, 
                distance: 84, 
                speed: 0.5,
                diameter: "6 779 –∫–º",
                temp: "-63¬∞C —Å—Ä–µ–¥–Ω—è—è",
                desc: "–ö—Ä–∞—Å–Ω–∞—è –ø–ª–∞–Ω–µ—Ç–∞"
            },
            { 
                name: "–Æ–ø–∏—Ç–µ—Ä", 
                radius: 8.8, 
                color: 0xD8CA9D, 
                distance: 110, 
                speed: 0.08,
                diameter: "139 820 –∫–º",
                temp: "-108¬∞C",
                desc: "–ö—Ä—É–ø–Ω–µ–π—à–∞—è –ø–ª–∞–Ω–µ—Ç–∞"
            },
            { 
                name: "–°–∞—Ç—É—Ä–Ω", 
                radius: 7.4, 
                color: 0xE4CD9E, 
                distance: 138, 
                speed: 0.03,
                diameter: "116 460 –∫–º",
                temp: "-139¬∞C",
                desc: "–ü–ª–∞–Ω–µ—Ç–∞ —Å –∫–æ–ª—å—Ü–∞–º–∏"
            },
            { 
                name: "–£—Ä–∞–Ω", 
                radius: 6.2, 
                color: 0x4FD0E7, 
                distance: 168, 
                speed: 0.01,
                diameter: "50 724 –∫–º",
                temp: "-197¬∞C",
                desc: "–õ–µ–¥—è–Ω–æ–π –≥–∏–≥–∞–Ω—Ç"
            },
            { 
                name: "–ù–µ–ø—Ç—É–Ω", 
                radius: 6, 
                color: 0x4B70DD, 
                distance: 196, 
                speed: 0.006,
                diameter: "49 244 –∫–º",
                temp: "-201¬∞C",
                desc: "–°–∞–º—ã–π –≤–µ—Ç—Ä–µ–Ω—ã–π"
            }
        ];
        
        const planets = [];
        const orbits = [];
        
        // –°–æ–∑–¥–∞–Ω–∏–µ –ø–ª–∞–Ω–µ—Ç
        function createPlanets() {
            planetsData.forEach((data, index) => {
                // –°–æ–∑–¥–∞–µ–º –ø–ª–∞–Ω–µ—Ç—É
                const geometry = new THREE.SphereGeometry(data.radius, 32, 32);
                const material = new THREE.MeshPhongMaterial({ 
                    color: data.color,
                    shininess: 30,
                    specular: 0x222222
                });
                
                const planet = new THREE.Mesh(geometry, material);
                
                if (index === 0) {
                    // –°–æ–ª–Ω—Ü–µ
                    scene.add(planet);
                    planet.position.set(0, 0, 0);
                } else {
                    // –ü–ª–∞–Ω–µ—Ç—ã
                    const orbitGroup = new THREE.Group();
                    planet.position.x = data.distance;
                    orbitGroup.add(planet);
                    scene.add(orbitGroup);
                    
                    // –°–æ—Ö—Ä–∞–Ω—è–µ–º —Å—Å—ã–ª–∫–∏
                    data.mesh = planet;
                    data.orbitGroup = orbitGroup;
                    data.group = orbitGroup;
                }
                
                // –°–æ—Ö—Ä–∞–Ω—è–µ–º –¥–∞–Ω–Ω—ã–µ
                data.mesh = planet;
                data.index = index;
                
                // –î–æ–±–∞–≤–ª—è–µ–º –≤ –º–∞—Å—Å–∏–≤
                planets.push(data);
            });
        }
        
        // –ö–æ–ª—å—Ü–∞ –°–∞—Ç—É—Ä–Ω–∞
        function createSaturnRings() {
            const saturn = planets[6];
            if (!saturn || !saturn.mesh) return;
            
            const ringGeometry = new THREE.RingGeometry(10, 16, 64);
            const ringMaterial = new THREE.MeshBasicMaterial({ 
                color: 0xFFD700,
                side: THREE.DoubleSide,
                transparent: true,
                opacity: 0.6
            });
            const rings = new THREE.Mesh(ringGeometry, ringMaterial);
            rings.rotation.x = Math.PI / 2;
            saturn.mesh.add(rings);
        }
        
        // –û—Ä–±–∏—Ç—ã
        function createOrbits() {
            planets.forEach((planet, index) => {
                if (index > 0) {
                    const orbitGeometry = new THREE.RingGeometry(
                        planet.distance - 0.2, 
                        planet.distance + 0.2, 
                        64
                    );
                    const orbitMaterial = new THREE.MeshBasicMaterial({ 
                        color: 0x444444,
                        side: THREE.DoubleSide,
                        transparent: true,
                        opacity: 0.2
                    });
                    const orbit = new THREE.Mesh(orbitGeometry, orbitMaterial);
                    orbit.rotation.x = Math.PI / 2;
                    scene.add(orbit);
                    orbits.push(orbit);
                }
            });
        }
        
        // –†–µ–π–∫–∞—Å—Ç–∏–Ω–≥ –¥–ª—è –∫–ª–∏–∫–æ–≤
        const raycaster = new THREE.Raycaster();
        const mouse = new THREE.Vector2();
        
        // –û–±—Ä–∞–±–æ—Ç–∫–∞ –∫–ª–∏–∫–æ–≤
        function onMouseClick(event) {
            // –ù–æ—Ä–º–∞–ª–∏–∑—É–µ–º –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –º—ã—à–∏
            mouse.x = (event.clientX / window.innerWidth) * 2 - 1;
            mouse.y = -(event.clientY / window.innerHeight) * 2 + 1;
            
            // –û–±–Ω–æ–≤–ª—è–µ–º —Ä–µ–π–∫–∞—Å—Ç–µ—Ä
            raycaster.setFromCamera(mouse, camera);
            
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º –ø–µ—Ä–µ—Å–µ—á–µ–Ω–∏—è —Å –ø–ª–∞–Ω–µ—Ç–∞–º–∏
            const planetMeshes = planets
                .filter(p => p.index !== 0)
                .map(p => p.mesh)
                .concat(planets[0].mesh);
            
            const intersects = raycaster.intersectObjects(planetMeshes);
            
            if (intersects.length > 0) {
                const clickedPlanet = planets.find(p => p.mesh === intersects[0].object);
                if (clickedPlanet) {
                    focusOnPlanet(clickedPlanet);
                }
            }
        }
        
        // –§–æ–∫—É—Å –Ω–∞ –ø–ª–∞–Ω–µ—Ç—É
        function focusOnPlanet(planet) {
            if (!planet) return;
            
            // –û–±–Ω–æ–≤–ª—è–µ–º UI
            document.getElementById('planetName').textContent = planet.name;
            document.getElementById('planetDescription').textContent = planet.desc;
            
            const infoDiv = document.querySelector('.planet-info');
            infoDiv.innerHTML = `
                <div id="planetName">${planet.name}</div>
                <div id="planetDescription">${planet.desc}</div>
                <div>–î–∏–∞–º–µ—Ç—Ä: ${planet.diameter}</div>
                <div>–¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞: ${planet.temp}</div>
            `;
            
            // –ü–ª–∞–≤–Ω–æ–µ –ø—Ä–∏–±–ª–∏–∂–µ–Ω–∏–µ –∫ –ø–ª–∞–Ω–µ—Ç–µ
            const targetPosition = new THREE.Vector3();
            
            if (planet.index === 0) {
                // –°–æ–ª–Ω—Ü–µ
                targetPosition.set(0, 10, 40);
                controls.target.set(0, 0, 0);
            } else {
                // –ü–ª–∞–Ω–µ—Ç–∞
                const planetPos = planet.mesh.getWorldPosition(new THREE.Vector3());
                targetPosition.copy(planetPos);
                targetPosition.z += 30;
                targetPosition.y += 5;
                controls.target.copy(planetPos);
            }
            
            // –ê–Ω–∏–º–∞—Ü–∏—è –¥–≤–∏–∂–µ–Ω–∏—è –∫–∞–º–µ—Ä—ã
            const startPosition = camera.position.clone();
            const duration = 1000; // 1 —Å–µ–∫—É–Ω–¥–∞
            const startTime = Date.now();
            
            function animateCamera() {
                const elapsed = Date.now() - startTime;
                const progress = Math.min(elapsed / duration, 1);
                
                // –ü–ª–∞–≤–Ω–æ–µ –¥–≤–∏–∂–µ–Ω–∏–µ
                camera.position.lerpVectors(startPosition, targetPosition, progress);
                
                if (progress < 1) {
                    requestAnimationFrame(animateCamera);
                }
            }
            
            animateCamera();
        }
        
        // –§–æ–∫—É—Å –Ω–∞ –°–æ–ª–Ω—Ü–µ
        function focusSun() {
            focusOnPlanet(planets[0]);
        }
        
        // –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ
        let rotationEnabled = true;
        let orbitsVisible = true;
        let rotationSpeed = 3;
        
        function toggleRotation() {
            rotationEnabled = !rotationEnabled;
            const btn = document.getElementById('toggleRotation');
            btn.classList.toggle('active');
            btn.textContent = rotationEnabled ? '–í—Ä–∞—â–µ–Ω–∏–µ ‚úì' : '–í—Ä–∞—â–µ–Ω–∏–µ';
        }
        
        function toggleOrbits() {
            orbitsVisible = !orbitsVisible;
            orbits.forEach(orbit => orbit.visible = orbitsVisible);
            const btn = document.getElementById('toggleOrbits');
            btn.classList.toggle('active');
            btn.textContent = orbitsVisible ? '–û—Ä–±–∏—Ç—ã ‚úì' : '–û—Ä–±–∏—Ç—ã';
        }
        
        function resetView() {
            camera.position.set(0, 40, 150);
            controls.target.set(0, 0, 0);
            focusOnPlanet(planets[0]);
        }
        
        // –ê–Ω–∏–º–∞—Ü–∏—è
        function animate() {
            requestAnimationFrame(animate);
            
            if (rotationEnabled) {
                planets.forEach((planet, index) => {
                    if (index === 0) {
                        // –í—Ä–∞—â–µ–Ω–∏–µ –°–æ–ª–Ω—Ü–∞
                        planet.mesh.rotation.y += 0.002 * rotationSpeed;
                    } else if (planet.orbitGroup) {
                        // –í—Ä–∞—â–µ–Ω–∏–µ –ø–ª–∞–Ω–µ—Ç—ã –≤–æ–∫—Ä—É–≥ –°–æ–ª–Ω—Ü–∞
                        planet.orbitGroup.rotation.y += (planet.speed * 0.01 * rotationSpeed) / 60;
                        // –í—Ä–∞—â–µ–Ω–∏–µ –ø–ª–∞–Ω–µ—Ç—ã –≤–æ–∫—Ä—É–≥ —Å–≤–æ–µ–π –æ—Å–∏
                        planet.mesh.rotation.y += 0.01 * rotationSpeed;
                    }
                });
            }
            
            controls.update();
            renderer.render(scene, camera);
        }
        
        // –†–µ—Å–∞–π–∑
        function onWindowResize() {
            camera.aspect = window.innerWidth / window.innerHeight;
            camera.updateProjectionMatrix();
            renderer.setSize(window.innerWidth, window.innerHeight);
        }
        
        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
        function init() {
            createStars();
            createPlanets();
            createOrbits();
            createSaturnRings();
            
            // –°–ª—É—à–∞—Ç–µ–ª–∏ —Å–æ–±—ã—Ç–∏–π
            window.addEventListener('resize', onWindowResize);
            window.addEventListener('click', onMouseClick);
            
            // –ö–æ–Ω—Ç—Ä–æ–ª—å —Å–∫–æ—Ä–æ—Å—Ç–∏
            document.getElementById('speedControl').addEventListener('input', function(e) {
                rotationSpeed = parseFloat(e.target.value);
                document.getElementById('speedValue').textContent = rotationSpeed + 'x';
            });
            
            // –ó–∞–ø—É—Å–∫
            animate();
            focusOnPlanet(planets[0]);
        }
        
        // –ó–∞–ø—É—Å–∫–∞–µ–º
        init();
    </script>
</body>
</html>
